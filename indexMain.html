<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>IncludHtml library</title>

  <script src="./IncludHtml.js" defer></script>
</head>

<body>

  <header>
    <h2>header</h2>
  </header>

  <!-- <section class="incs herro"
  data-incs='{"incFile": "./page-index/a_herro.html" }'
  ></section> -->
<!-- 
  "incFile": "./inc/main.html#extId", // путь до файла и id внутри определяет вставляемую часть
  "incInner" : true,  // [true], false -  определяет вставляемую часть: 
                                        // true/false - innerHTML/outerHTML; 
  "insertType": "replace",  // ["replace"],  "append", "prepend", - куда попадает вставляемое
  "incFromId": "extId"
 -->
  <main class="main" data-incs='{ "incFile": "./inc/main.html#extId" }'>
    <section>
      <h3>main section 0</h3>
    </section>
  </main>

  <footer>
    <h2>footer</h2>
  </footer>

  <script>
    window.onload = () => console.log('window onload');
    document.addEventListener("DOMContentLoaded", function () {

      

      IncludHtml.doIncludAll(
        {
          insertType: "append",
          // incInner: true,
          incInner: false,
          replace: [
            { from: 'src="../img/', to: 'src="./img/' },
          ],
          "incFromId": "extId"
        },
        () => {
          console.log("IncludHtml.doIncludAll Finish: Ok"); // вызывается когда IncludHtml всё сделал

          // в результате вызова IncludHtml.doInsertInto
          // в main добавляются элемены прописанные в его атрибуте data-incs='{ "incFile": "./inc/main.html#extId" }'
          //  т.е. содержимым ./inc/main.html с id="extId"
          let el = document.querySelector('main');
          IncludHtml.doInsertInto(
            el,
            () => {
              console.log("IncludHtml.doInsertInto Finish: Ok");
            }
          )
        }
      );
      /*
            IncludHtml.doIncludAll(
              {
                insertType: "append",
                replace: [
                  { from: 'src="../asset/img/', to: 'src="./asset/img/' },
                  { from: 'src="../asset/svg/', to: 'src="./asset/svg/' }
                ],
                "incFromId": "extId"
              },
              () => {
                // console.log("IncludHtml Finish: Ok"); // вызывается когда IncludHtml всё сделал
                // прячем индикатор ожидания
                if (typeof (root1Off) === 'undefined' || !root1Off) {
                  try {
                    document.querySelector("body .root1").style.display = "";
                  } catch (e) { }
                  try {
                    document.querySelector("body .root2").style.display = "none";
                  } catch (e) { }
                }
      
                // по currPage добавляем 'page-selected' класс
                document.querySelectorAll(`.root1 .${currPageClass}`).forEach((el) => {
                  el.classList.add("page-selected");
                });
              }
            );
      */
    });
  </script>
</body>

</html>